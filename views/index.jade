extend layout
block content
  .presentation
    h1 Uqido Car
    p WASD is the way!
    p Otherwise, you can use buttons below!
  .control_panel
    #video_stream.video_stream
      img(src="http://#{host}:8080/?action=stream")
      .placeholder
        p Can't reach video, refresh the page or wait till nothing!
    .menu
      a.button.reload_stream(href="#", onclick="reloadStream('http://#{host}:8080')") R
      a.button.snapshot(href="http://#{host}:8080/?action=snapshot", target="_blank") S
    .keyboard
      a.drive_control.button.w(href="#", data-desktop-label="w", data-mobile-label="↑", data-drive-go=1) 
      a.drive_control.button.a(href="#", data-desktop-label="a", data-mobile-label="←", data-drive-turn=-1)
      a.drive_control.button.s(href="#", data-desktop-label="s", data-mobile-label="↓", data-drive-go=-1)
      a.drive_control.button.d(href="#", data-desktop-label="d", data-mobile-label="→", data-drive-turn=1)
  script
    //- | $(document).on("load", createImageLayer("http://#{host}:8080"));
    | $(document).on("keydown", function(e) {keyboardControl(e)});
    | $(".drive_control").on("mousedown touchstart", function(e) {mouseControl(e)});
    | $(".video_stream img").error(function(){
    |   $(this).hide();
    | });
